<div class="scoring-container">
  <div class="theme-toggle">
    <button type="button" (click)="toggleTheme()" class="theme-button">
      {{ isDark() ? 'üåô –¢—ë–º–Ω–∞—è' : '‚òÄÔ∏è –°–≤–µ—Ç–ª–∞—è' }} —Ç–µ–º–∞
    </button>
  </div>
    
  <h2>–ö—Ä–µ–¥–∏—Ç–Ω—ã–π —Å–∫–æ—Ä–∏–Ω–≥</h2>
  
  <form [formGroup]="form" (ngSubmit)="submit()">
    <div class="form-row">
      <label for="age">–í–æ–∑—Ä–∞—Å—Ç</label>
      <input 
        id="age"
        type="number" 
        formControlName="age"
        placeholder="–í–≤–µ–¥–∏—Ç–µ –≤–æ–∑—Ä–∞—Å—Ç"
      />
      <div class="error" *ngIf="f['age'].touched && f['age'].invalid">
        –í–æ–∑—Ä–∞—Å—Ç –æ–±—è–∑–∞—Ç–µ–ª–µ–Ω (18‚Äì100)
      </div>
    </div>

    <div class="form-row">
      <label for="income">–î–æ—Ö–æ–¥ (–≤ –º–µ—Å—è—Ü)</label>
      <input 
        id="income"
        type="number" 
        formControlName="income"
        placeholder="–í–≤–µ–¥–∏—Ç–µ –¥–æ—Ö–æ–¥"
      />
      <div class="error" *ngIf="f['income'].touched && f['income'].invalid">
        –î–æ—Ö–æ–¥ –æ–±—è–∑–∞—Ç–µ–ª–µ–Ω –∏ –¥–æ–ª–∂–µ–Ω –±—ã—Ç—å ‚â• 0
      </div>
    </div>

    <div class="form-row">
      <label for="yearsAtJob">–°—Ç–∞–∂ —Ä–∞–±–æ—Ç—ã (–ª–µ—Ç)</label>
      <input 
        id="yearsAtJob"
        type="number" 
        formControlName="yearsAtJob"
        placeholder="–í–≤–µ–¥–∏—Ç–µ —Å—Ç–∞–∂"
      />
      <div class="error" *ngIf="f['yearsAtJob'].touched && f['yearsAtJob'].invalid">
        –°—Ç–∞–∂ –æ–±—è–∑–∞—Ç–µ–ª–µ–Ω –∏ –¥–æ–ª–∂–µ–Ω –±—ã—Ç—å ‚â• 0
      </div>
    </div>

    <div class="form-row">
      <label for="dependents">–ö–æ–ª–∏—á–µ—Å—Ç–≤–æ –∏–∂–¥–∏–≤–µ–Ω—Ü–µ–≤</label>
      <input 
        id="dependents"
        type="number" 
        formControlName="dependents"
        placeholder="0"
      />
      <div class="error" *ngIf="f['dependents'].touched && f['dependents'].invalid">
        –ù–µ –º–æ–∂–µ—Ç –±—ã—Ç—å –º–µ–Ω—å—à–µ 0
      </div>
    </div>

    <div class="form-row checkbox-row">
      <label for="hasExistingLoan">
        <input 
          id="hasExistingLoan"
          type="checkbox" 
          formControlName="hasExistingLoan"
        />
        –ï—Å—Ç—å –¥–µ–π—Å—Ç–≤—É—é—â–∏–π –∫—Ä–µ–¥–∏—Ç
      </label>
    </div>

    <div class="form-row">
      <label for="creditScore">–ö—Ä–µ–¥–∏—Ç–Ω—ã–π —Ä–µ–π—Ç–∏–Ω–≥</label>
      <input 
        id="creditScore"
        type="number" 
        formControlName="creditScore"
        placeholder="300-900"
      />
      <div class="error" *ngIf="f['creditScore'].touched && f['creditScore'].invalid">
        –ö—Ä–µ–¥–∏—Ç–Ω—ã–π —Ä–µ–π—Ç–∏–Ω–≥ –æ–±—è–∑–∞—Ç–µ–ª–µ–Ω (300‚Äì900)
      </div>
    </div>

    <button 
      type="submit" 
      [disabled]="loading() || form.invalid"
      [class.loading]="loading()"
    >
      {{ loading() ? '–†–∞—Å—á—ë—Ç...' : '–†–∞—Å—Å—á–∏—Ç–∞—Ç—å' }}
    </button>
  </form>

  <div class="error global-error" *ngIf="error()">
    {{ error() }}
  </div>

  <div class="result" *ngIf="result()">
    <h3>–†–µ–∑—É–ª—å—Ç–∞—Ç</h3>
    <p><strong>Rule score:</strong> {{ result()!.ruleScore | number:'1.0-2' }}</p>
    <p><strong>–í–µ—Ä–æ—è—Ç–Ω–æ—Å—Ç—å –¥–µ—Ñ–æ–ª—Ç–∞ (ML):</strong> {{ result()!.mlProbability | percent:'1.0-2' }}</p>
    <p>
      <strong>–†–µ—à–µ–Ω–∏–µ:</strong>
      <span [ngClass]="{ 'approved': result()!.approved, 'denied': !result()!.approved }">
        {{ result()!.approved ? '–û–î–û–ë–†–ï–ù–û' : '–û–¢–ö–ê–ó' }}
      </span>
    </p>
  </div>
</div>